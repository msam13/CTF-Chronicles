# Web Security Basics from Computer Security 

## Generic Description of Web as a technical infrastructre

Browser  <=> Web Server <=> Backend Server

Browser sends Https request to webserver
Web server extracts infromation from reqesuts an constructs request to the Backend Server.
Backend Server (database server) returns information back to web server
web server constructs the output in the form of HTML & CSS result pages and sends it to browser. 

HTTP request has a *method* that shoud be peformed on the resource. methods are GET, POST, PUT, PATCH, DELETE etc


**Web Browser**

1. Uses DOM (Domain Object Model) to display web pages. it parses HTML to _document.body_ of the dom.
2. Manages sessions
3. Performs access control when scripts within web pages are executed

## Threat Model

In web security we assume network communication is secure. 
```
In Standard Thread model of communication security we assume attacker is in control of network
In Standard Threat model of operating system we assume attacker has accedss to operating system command line
```
## Authenticated Sessions

Authenticates Session has 3 conceptual layers

1. Transport Layer (betweeen Client and Server)
Authenticated sessions in transport layer can be established with SSL/TLS

TLS- with user has certificate and corresponding key then TLS with mutual authentication can be used
EAP-TTLS - when user and service share a password then EAP-TTLS protocol can be used.
*HTTP with TLS is HTTPS*

2. Network Layer (between browser and web server)
Server may send a SID (session identifier) to client. Client includes the SID in subsequent requests to server. 
For transfering session ID
* Cookie
* URI
* POST 

3. Application Layer (user and service provider) again server can send kind of authenticator which will be stored in broswers private space and can be sent back

## Cookie Poisoning
Malicious clients modiying cookie and elevating thier permission is called cookie poisoning
other cookie attack include outsiders getting cookie by interating with the server. Outsiders guessing cookie or stealing cookie from legit users and modfiying it to elevate permissions.

***cookie Security***
* SID must be unpredictable
* SID must be stored in safe place
* Attacking cryptographic message to prevent modification of SID.

## Man in Middle attacks in Transport layer

<u>Man-in-Middle Attack Breaking Application-Layer Sessions </u>

To avoid Man in Middle attack the UAC (User Authenticator) has not only user information but also TLS session information attached to it. 

<u>Man-in-Middle Attack Exploiting TLS Session Renegotiation </u>

## Cross Site Scripting (XSS)

*too huge topic*
Types 
1. Stored - Malicious code injected is stored in backend application and send to everyone who requests it. (malicious code can be added as comments on blog, Nickname in chathouses, contact details on delivery)
2. Reflected - Some websites reflects (sends back) the data in HTTP request to client in immediate response. Malicous data and can sent to server and immediate response link is sent to victim. when victim clicks the link the malicious code is executed
3. DOM based -Some client side JavaScript processes data from untrusted source in a unsafe way(writing it back to dom). So attacker delivers it to victim with malicious input and it gets executed at the victim's browser.

## Cookie Stealing
when reflected XSS is sent to victim, the Victim browser sends victim's cookie to server (or wherevery it is programmed to send)
 
If one webpage is vulnerable to XSS, then all webpages linked to it can be exploited.

## Cross Site Request Forgery (XSRF)

Difference between XSS and XSRF is that, XSRF makes victim perform some unintentional action. where XSS is running malicious script in user's browser.

Types:
1. Stored XSRF - Much better chances
2. Reflected XSRF - Good chances





